<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:AutoJobSearchGUI.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="AutoJobSearchGUI.Views.JobListingView"
			 x:DataType="vm:JobListingViewModel">

	<Design.DataContext>
		<!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
		<vm:JobListingViewModel/>
	</Design.DataContext>

	<DockPanel>
		<StackPanel 
			DockPanel.Dock="Top" 
			Orientation="Horizontal"
			HorizontalAlignment="Center">
			<Button Content="Previous Job" Margin="5 0" Command="{Binding GoToPreviousJobCommand}" />
			<Button Content="Next Job" Margin="5 0" Command="{Binding GoToNextJobCommand}" />
			<Button Content="Add Job" Margin="5 0" Command="{Binding CreateJobCommand}" />
			<Button Content="Delete Job" Margin="5 0" Command="{Binding DeleteJobCommand}" />
			<Button Content="Edit Job" Margin="5 0" Command="{Binding ToggleEditModeCommand}" Background="{Binding EditButtonColour}" />
			<Button Content="Add Associated Contact" Margin="5 0" Command="{Binding AddAssociatedContactCommand}" />
			<Menu>
				<MenuItem Header="Navigate to Associated Contacts">
					<ListBox
						ItemsSource="{Binding AssociatedContactIds}"
						SelectedItem="{Binding SelectedContactId}"
						SelectionMode="Single"/>
					<Button
						Content="Navigate to Contact"
						Command="{Binding ViewContactCommand}"
						ClickMode="Press"
						IsEnabled="{Binding IsNavigateToContactButtonEnabled}"/>
				</MenuItem>
			</Menu>
		</StackPanel>
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="*" />
			</Grid.ColumnDefinitions>

			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="5*" />
				<RowDefinition Height="2*" />
				<RowDefinition Height="2*" />
			</Grid.RowDefinitions>

			<TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" Margin="0 5">Id</TextBlock>
			<TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding JobListing.Id}" Margin="0 5"/>

			<TextBlock Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center" Margin="0 5">Creation Date</TextBlock>
			<TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding JobListing.CreatedAt}" Margin="0 5"/>

			<TextBlock Grid.Row="2" Grid.Column="0" HorizontalAlignment="Center" Margin="0 5">Status Last Modified</TextBlock>
			<TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding JobListing.StatusModifiedAt}" Margin="0 5"/>

			<TextBlock
				Grid.Row="3"
				Grid.Column="0"
				HorizontalAlignment="Center"
				VerticalAlignment="Center"
				Text="Search Term"
				Margin="0 5"/>
			<TextBox 
				Grid.Row="3" 
				Grid.Column="1" 
				Text="{Binding JobListing.SearchTerm}"
				IsEnabled="{Binding IsEditModeEnabled}"
				TextWrapping="NoWrap"
				AcceptsReturn="False"
				AcceptsTab="True"
				IsUndoEnabled="True"
				UndoLimit="1000"
				Margin="0 5"/>

			<TextBlock 
				Grid.Row="4" 				   
				Grid.Column="0" 
				HorizontalAlignment="Center" 
				VerticalAlignment="Center"
				Text="Score"
				Margin="0 5"/>
			<NumericUpDown 
				Grid.Row="4" 
				Grid.Column="1" 
				Value="{Binding JobListing.Score}"
				IsEnabled="{Binding IsEditModeEnabled}" 
				FormatString="0"
				Margin="0 5"/>

			<StackPanel Grid.Row="5"
			Grid.ColumnSpan="2"
			Orientation="Horizontal"
			HorizontalAlignment="Center">
				<TextBlock VerticalAlignment="Center">To Be Applied To</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsToBeAppliedTo}" />
				<TextBlock VerticalAlignment="Center">Applied</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsAppliedTo}" />
				<TextBlock VerticalAlignment="Center">Interviewing</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsInterviewing}" />
				<TextBlock VerticalAlignment="Center">Negotiating</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsNegotiating}" />
				<TextBlock VerticalAlignment="Center">Rejected</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsRejected}" />
				<TextBlock VerticalAlignment="Center">Declined Offer</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsDeclinedOffer}" />
				<TextBlock VerticalAlignment="Center">Accepted Offer</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsAcceptedOffer}" />
				<TextBlock VerticalAlignment="Center">Favourite</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsFavourite}" />
				<!--Margin="10 0 5 0"-->
				<TextBlock VerticalAlignment="Center">Archived/Hidden</TextBlock>
				<CheckBox IsChecked="{Binding JobListing.IsHidden}" />
			</StackPanel>

			<TextBlock
				Grid.Row="6"
				Grid.Column="0"
				HorizontalAlignment="Center"
				VerticalAlignment="Top"
				Text="Job Description"
				Margin="0 5"/>
			<TextBox
				Grid.Row="6"
				Grid.Column="1"
				Text="{Binding JobListing.Description}"
				IsReadOnly="{Binding !IsEditModeEnabled}"
				TextWrapping="Wrap"
				AcceptsReturn="True"
				AcceptsTab="True"
				IsUndoEnabled="True"
				UndoLimit="1000"
				Margin="0 5"/>

			<TextBlock
				Grid.Row="7"
				Grid.Column="0"
				HorizontalAlignment="Center"
				VerticalAlignment="Top"
				Text="Application Links" 
				Margin="0 5"/>
			<!-- There is no good way of being able to display the ApplicationLinks table records
			     in a view control such as a ListBox, while also allowing the user to make updates to these
				 links within the view and have the changes reflected in the database. Therefore editing this
				 control is always disabled, and if users need to manually add application links then 
				 it needs to be performed in the Notes text box. -->
			<TextBox
				Grid.Row="7"
				Grid.Column="1"
				Text="{Binding JobListing.ApplicationLinks}"
				IsEnabled="True"
				IsReadOnly="True"
				Margin="0 5"/>

			<TextBlock
				Grid.Row="8"
				Grid.Column="0"
				HorizontalAlignment="Center"
				VerticalAlignment="Top"
				Text="Notes"
				Margin="0 5"/>
			<TextBox
				Grid.Row="8"
				Grid.Column="1"
				Text="{Binding JobListing.Notes}"
				IsEnabled="{Binding IsEditModeEnabled}"
				TextWrapping="Wrap"
				AcceptsReturn="True"
				AcceptsTab="True"
				IsUndoEnabled="True"
				UndoLimit="1000"
				Margin="0 5"/>
		</Grid>
	</DockPanel>
	

</UserControl>
